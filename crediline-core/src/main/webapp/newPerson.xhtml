<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:cl="http://xmlns.jcp.org/jsf/composite/components"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
<f:view>


<ui:composition>
    <cl:PersonComponent managedBean="#{managedBean}" uniqueIndex="#{uniqueIndex}"/>
</ui:composition>


<!--<h:panelGroup layout="block" style="float: left; padding: 10px">

<p:toolbar>
    <p:toolbarGroup align="left">
        <h:form>
            <p:commandButton value="#{msg['common.menu.save']}"
                             actionListener="#{managedBean.save}"
                             icon="ui-icon-document">
            </p:commandButton>
        </h:form>
    </p:toolbarGroup>
</p:toolbar>


<p:fieldset legend="#{msg['common.main']}" style="margin-top: 10px; !important;">
    <h:form id="mainContactsForm_#{uniqueIndex}">
        <p:messages id="contact1Messages_#{uniqueIndex}" showDetail="true"/>
        <h:panelGrid columns="4" columnClasses="label, value">
            <h:outputText value="#{msg['common.name']}"/>
            <p:inputText required="true" tabindex="1"
                         label="#{msg['common.name']}"
                         value="#{managedBean.person.name}">
                <p:ajax update="contact1Messages_#{uniqueIndex}" event="keyup"/>
            </p:inputText>
            <h:outputText value="#{msg['common.contact.lkno']}"/>
            <p:inputText required="true" tabindex="5"
                         label="#{msg['common.contact.lkno']}"
                         value="#{managedBean.person.lkNo}">
                <p:ajax update="contact1Messages_#{uniqueIndex}" event="keyup"/>
            </p:inputText>
            <h:outputText value="#{msg['common.midname']}"/>
            <p:inputText required="true" tabindex="2"
                         label="#{msg['common.midname']}"
                         value="#{managedBean.person.midname}">
                <p:ajax update="contact1Messages_#{uniqueIndex}" event="keyup"/>
            </p:inputText>
            <h:outputText value="#{msg['common.contact.issueDate']}"/>
            <p:inputMask required="true" tabindex="6"
                         label="#{msg['common.contact.issueDate']}"
                         value="#{managedBean.lkIssueDate}" mask="99/99/9999">
                <p:ajax update="contact1Messages_#{uniqueIndex}" event="keyup"/>
            </p:inputMask>
            <h:outputText value="#{msg['common.surname']}"/>
            <p:inputText required="true" tabindex="3"
                         label="#{msg['common.surname']}"
                         value="#{managedBean.person.surname}">
                <p:ajax update="contact1Messages_#{uniqueIndex}" event="keyup"/>
            </p:inputText>
            <h:outputText value="#{msg['common.contact.lkIssuePlace']}"/>
            <p:inputText required="true" tabindex="7"
                         label="#{msg['common.contact.lkIssuePlace']}"
                         value="#{managedBean.person.lkIssueLocation}">
                <p:ajax update="contact1Messages_#{uniqueIndex}" event="keyup"/>
            </p:inputText>
            <h:outputText value="#{msg['common.egn']}"/>
            <p:inputMask mask="9999999999" required="true" tabindex="4"
                         label="#{msg['common.egn']}"
                         value="#{managedBean.person.egn}" effect="blind">
                <p:ajax update="contact1Messages_#{uniqueIndex}" event="keyup"/>
            </p:inputMask>
        </h:panelGrid>
    </h:form>
</p:fieldset>


<p:fieldset legend="#{msg['common.menu.addresses']}"
            style="margin-top: 10px; !important;">
<h:form id="addressForm_#{uniqueIndex}">
<p:messages id="addressMessages_#{uniqueIndex}" showDetail="true"/>
<h:panelGrid columns="4" columnClasses="label, value">
    <h:outputText value="#{msg['common.country']}"/>
    <p:autoComplete required="true"
                    label="#{msg['common.country']}"
                    value="#{managedBean.address.country}"
                    completeMethod="#{autoComplete.autoCompleteCountries}">
    </p:autoComplete>
    <h:outputText value="#{msg['common.city']}"/>
    <p:autoComplete required="true"
                    label="#{msg['common.city']}"
                    value="#{managedBean.address.city}"
                    completeMethod="#{autoComplete.autoCompleteCities}">
    </p:autoComplete>
    <h:outputText value="#{msg['common.quarter']}"/>
    <p:inputText required="false"
                 label="#{msg['common.quarter']}"
                 value="#{managedBean.address.quarter}">
    </p:inputText>
    <h:outputText value="#{msg['common.street']}"/>
    <p:inputText required="true"
                 label="#{msg['common.street']}"
                 value="#{managedBean.address.street}">
    </p:inputText>
    <h:outputText value="#{msg['common.number']}"/>
    <p:inputText style="width: 60px"
                 label="#{msg['common.number']}"
                 value="#{managedBean.address.number}">
    </p:inputText>
    <h:outputText value="#{msg['common.entrance']}"/>
    <p:inputText required="false" style="width: 60px"
                 label="#{msg['common.entrance']}"
                 value="#{managedBean.address.entrance}">
    </p:inputText>
    <h:outputText value="#{msg['common.floor']}"/>
    <p:inputText required="false" style="width: 60px"
                 label="#{msg['common.floor']}"
                 value="#{managedBean.address.floor}">
    </p:inputText>
    <h:outputText value="#{msg['common.apartment']}"/>
    <p:inputText required="false" style="width: 60px"
                 label="#{msg['common.apartment']}"
                 value="#{managedBean.address.apartment}">
    </p:inputText>
    <h:outputText value="#{msg['common.type']}"/>
    <h:selectOneMenu value="#{managedBean.address.addressType}">
        <f:selectItems
                value="#{data.addressTypes}"
                var="addressType"
                itemValue="#{addressType}"
                itemLabel="#{msg['address.addressType.'.concat(addressType)]}"/>
    </h:selectOneMenu>
    <h:outputText value=""/>
    <h:outputText value=""/>
    <h:outputText value=""/>
    <p:commandButton value="#{msg['common.add']} #{msg['common.menu.address']}"
                     update="addressForm_#{uniqueIndex}, addressTable_#{uniqueIndex}"
                     actionListener="#{managedBean.addAddress2Person}"
                     style="margin-bottom: 20px" icon="ui-icon-plusthick">
    </p:commandButton>
</h:panelGrid>

&lt;!&ndash;<p:accordionPanel id="addressesAccordion" value="#{managedBean.person.addresses}"
                  var="address"
                  dynamic="true">
    <p:tab title="#{address.addressType}">
        <h:panelGrid columns="2" columnClasses="label, value">
            <h:outputText value="#{msg['common.country']}"/>
            <p:autoComplete
                    label="#{msg['common.country']}"
                    value="#{address.country}"
                    completeMethod="#{autoComplete.autoCompleteCountries}">
            </p:autoComplete>
            <h:outputText value="#{msg['common.city']}"/>
            <p:autoComplete
                    label="#{msg['common.city']}"
                    value="#{address.city}"
                    completeMethod="#{autoComplete.autoCompleteCities}">
            </p:autoComplete>
            <h:outputText value="#{msg['common.quarter']}"/>
            <p:inputText required="false"
                         label="#{msg['common.quarter']}"
                         value="#{address.quarter}">
            </p:inputText>
            <h:outputText value="#{msg['common.street']}"/>
            <p:inputText required="false"
                         label="#{msg['common.street']}"
                         value="#{address.street}">
            </p:inputText>
            <h:outputText value="#{msg['common.number']}"/>
            <p:inputText
                    label="#{msg['common.number']}"
                    value="#{address.number}">
            </p:inputText>
            <h:outputText value="#{msg['common.entrance']}"/>
            <p:inputText required="false"
                         label="#{msg['common.entrance']}"
                         value="#{address.entrance}">
            </p:inputText>
            <h:outputText value="#{msg['common.floor']}"/>
            <p:inputText required="false"
                         label="#{msg['common.floor']}"
                         value="#{address.floor}">
            </p:inputText>
            <h:outputText value="#{msg['common.apartment']}"/>
            <p:inputText required="false"
                         label="#{msg['common.apartment']}"
                         value="#{address.apartment}">
            </p:inputText>
            <h:outputText value="#{msg['common.building']}"/>
            <p:inputText required="false"
                         label="#{msg['common.building']}"
                         value="#{address.building}">
            </p:inputText>

            <h:outputText value="#{msg['common.type']}"/>
            <h:selectOneMenu value="#{managedBean.address.addressType}">
                <f:selectItems
                        value="#{data.addressTypes}"
                        var="addressType"
                        itemValue="#{addressType}"
                        itemLabel="#{msg['address.addressType.'.concat(addressType)]}"/>
            </h:selectOneMenu>
            <h:outputText value=""/>
            <p:commandButton id="removeAddressButton" value="#{msg['common.remove']}"
                             actionListener="#{managedBean.removeAddressFromPerson}"/>
        </h:panelGrid>
    </p:tab>
</p:accordionPanel>&ndash;&gt;

<p:dataTable id="addressTable_#{uniqueIndex}" var="address" value="#{managedBean.person.addresses}"
             editable="true"
             editMode="cell" selection="#{managedBean.selectedAddress}"
             selectionMode="single" rowKey="#{address.id}">

    <f:facet name="header">
        #{msg['addressTable.footer']}
    </f:facet>

    <p:column headerText="#{msg['common.country']}">
        <p:cellEditor>
            <f:facet name="output"><h:outputText value="#{address.country}"/></f:facet>
            <f:facet name="input">
                <h:selectOneMenu value="#{address.country}" style="width:100%">
                    <f:selectItems value="#{data.countries}" var="country"
                                   itemLabel="#{msg['country.'.concat(country)]}"
                                   itemValue="#{country}"/>
                </h:selectOneMenu>
            </f:facet>
        </p:cellEditor>
    </p:column>

    <p:column headerText="#{msg['common.city']}">
        <h:outputText value="#{address.city}"/>
    </p:column>

    <p:column headerText="#{msg['common.quarter']}">
        <p:cellEditor>
            <f:facet name="output"><h:outputText value="#{address.quarter}"/></f:facet>
            <f:facet name="input"><p:inputText value="#{address.quarter}"
                                               style="width:96%"/></f:facet>
        </p:cellEditor>
    </p:column>

    <p:column headerText="#{msg['common.street']}">
        <h:outputText value="#{address.street}"/>
    </p:column>

    <p:column headerText="#{msg['common.number']}">
        <h:outputText value="#{address.number}"/>
    </p:column>

    <p:column headerText="#{msg['common.entrance']}">
        <h:outputText value="#{address.entrance}"/>
    </p:column>

    <p:column headerText="#{msg['common.floor']}">
        <h:outputText value="#{address.floor}"/>
    </p:column>

    <p:column headerText="#{msg['common.apartment']}">
        <h:outputText value="#{address.apartment}"/>
    </p:column>

    &lt;!&ndash;<p:column headerText="#{msg['common.building']}">
        <h:outputText value="#{address.building}"/>
    </p:column>&ndash;&gt;

    <p:column headerText="#{msg['common.type']}">
        <h:outputText value="#{address.addressType}"/>
    </p:column>

    <p:column style="width:30px">
        <p:commandButton update="addressTable_#{uniqueIndex}"
                         action="#{managedBean.removeAddressFromPerson}"
                         icon="ui-icon-closethick" title="Delete" immediate="true">
            <f:setPropertyActionListener value="#{address}" target="#{managedBean.selectedAddress}"/>
        </p:commandButton>
    </p:column>

    &lt;!&ndash;<f:facet name="footer">
        &lt;!&ndash;<p:commandButton value="#{msg['common.view']}" icon="ui-icon-search"
                         update="addressDetails_#{uniqueIndex}"
                         oncomplete="PF('addressDialog_'.concat(#{uniqueIndex})).show()"/>&ndash;&gt;
        <p:commandButton value="#{msg['common.remove']}" icon="ui-icon-minus"
                         action="#{managedBean.removeAddressFromPerson(address)}"
                         update="addressTable_#{uniqueIndex}" ajax="true">
            <f:setPropertyActionListener
                    target="#{managedBean.selectedAddress}"
                    value="#{address}"/>
        </p:commandButton>
    </f:facet>&ndash;&gt;
</p:dataTable>

&lt;!&ndash;
<p:dialog header="Address detail" widgetVar="addressDialog_#{uniqueIndex}"
          width="250" showEffect="explode" hideEffect="explode">

    <p:dataList id="addressDetails_#{uniqueIndex}"
                value="#{tableBean.selectedCars}"
                var="selectedCar" type="definition">
        Address Google maps plugin.
        <f:facet name="description">
            &lt;!&ndash;<p:graphicImage value="/images/cars/#{selectedCar.manufacturer}.jpg"/>&ndash;&gt;
        </f:facet>
    </p:dataList>
</p:dialog>
&ndash;&gt;

</h:form>
</p:fieldset>


<p:fieldset legend="#{msg['common.contacts.phones']}"
            style="margin-top: 10px; !important;">
    <h:form id="phonesForm_#{uniqueIndex}">
        <p:messages id="phoneMessages_#{uniqueIndex}" showDetail="true"/>
        <h:panelGrid columns="4" columnClasses="label, value">
            <h:outputText value="#{msg['common.contacts.phone']}"/>
            <p:inputText required="false"
                         label="#{msg['common.contacts.phone']}"
                         value="#{managedBean.phone.number}">
            </p:inputText>
            <h:outputText value="#{msg['common.type']}"/>
            <h:selectOneMenu value="#{managedBean.phone.phoneType}">
                <f:selectItems
                        value="#{data.phoneTypes}"
                        var="phoneType"
                        itemValue="#{phoneType}"
                        itemLabel="#{msg['common.contacts.phone.'.concat(phoneType)]}"/>
            </h:selectOneMenu>
            <h:outputText value=""/>
            <p:commandButton value="#{msg['common.add']} #{msg['common.contacts.phone']}"
                             update="phonesForm_#{uniqueIndex}, phonesTable_#{uniqueIndex}"
                             actionListener="#{managedBean.addPhone2Person}"
                             style="margin-bottom: 20px" icon="ui-icon-plusthick">
            </p:commandButton>
        </h:panelGrid>

        <p:dataTable id="phonesTable_#{uniqueIndex}" var="phone" value="#{managedBean.person.phones}"
                     editable="true"
                     editMode="cell" widgetVar="addressTable">

            <f:facet name="header">
                #{msg['phoneTable.footer']}
            </f:facet>

            <p:column headerText="#{msg['common.number']}">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{phone.number}"/></f:facet>
                    <f:facet name="input"><p:inputText value="#{phone.number}"
                                                       style="width:96%"/></f:facet>
                </p:cellEditor>
            </p:column>

            <p:column headerText="#{msg['common.type']}">
                <p:cellEditor>
                    <f:facet name="output"><h:outputText value="#{phone.phoneType}"/></f:facet>
                    <f:facet name="input">
                        <h:selectOneMenu value="#{phone.phoneType}" style="width:100%">
                            <f:selectItems value="#{data.phoneTypes}" var="phoneType"
                                           itemLabel="#{msg['common.contacts.phone.'.concat(phoneType)]}"
                                           itemValue="#{country}"/>
                        </h:selectOneMenu>
                    </f:facet>
                </p:cellEditor>
            </p:column>

            <p:column style="width:30px">
                <p:commandButton update="phonesTable_#{uniqueIndex}"
                                 action="#{managedBean.removePhoneFromPerson}"
                                 icon="ui-icon-closethick" title="Delete" immediate="true">
                    <f:setPropertyActionListener value="#{phone}" target="#{managedBean.selectedPhone}"/>
                </p:commandButton>
            </p:column>

        </p:dataTable>
    </h:form>
</p:fieldset>


<p:fieldset legend="#{msg['common.additional']}" style="margin-top: 10px; !important">
    <h:form id="otherDataForm_#{uniqueIndex}">
        <h:panelGrid columns="2" columnClasses="label, value">
            <h:outputText value="#{msg['common.maritalStatus']}"/>
            <h:selectOneMenu value="#{managedBean.person.maritalStatus}">
                <f:selectItems
                        value="#{data.statuses}"
                        var="maritalStatus"
                        itemValue="#{maritalStatus}"
                        itemLabel="#{msg['owner.maritalStatus.'.concat(maritalStatus)]}"/>
            </h:selectOneMenu>

            <h:outputText value="#{msg['common.education']}"/>
            <h:selectOneMenu value="#{managedBean.person.education}">
                <f:selectItems
                        value="#{data.educations}"
                        var="education"
                        itemValue="#{education}"
                        itemLabel="#{msg['owner.education.'.concat(education)]}"/>
            </h:selectOneMenu>

            <h:outputText value="#{msg['common.profession']}"/>
            <p:inputText required="false"
                         label="#{msg['common.floor']}"
                         value="#{managedBean.person.profession}">
            </p:inputText>

            <h:outputText value="#{msg['common.comment']}"/>
            <p:inputTextarea required="false"
                             label="#{msg['common.comment']}"
                             value="#{managedBean.personComment}">
            </p:inputTextarea>
            <h:outputText value="#{msg['common.rating']}"/>
            <p:rating value="#{managedBean.person.rating}" stars="10"/>
        </h:panelGrid>
    </h:form>
</p:fieldset>


</h:panelGroup>-->

</f:view>
</html>
